import{r as b,j as e,a as B}from"./index-rh9x3ToF.js";const w=b.memo(({type:a,mode:o,setMode:r,amount:l,setAmount:p,autoCashout:x,setAutoCashout:f,hasBet:s,handleBet:j,handleCashout:C,gameState:n,loading:u})=>e.jsxs("div",{className:`betting-container ${a}-container`,children:[e.jsxs("div",{className:"betting-header",children:[e.jsx("h3",{children:a.charAt(0).toUpperCase()+a.slice(1)}),e.jsxs("div",{className:"mode-toggle",children:[e.jsx("button",{className:`toggle-btn ${o==="manual"?"active":""}`,onClick:()=>r("manual"),children:"M"}),e.jsx("button",{className:`toggle-btn ${o==="auto"?"active":""}`,onClick:()=>r("auto"),children:"A"})]})]}),e.jsxs("div",{className:"betting-controls",children:[e.jsx("input",{type:"number",className:"amount-input",value:l,onChange:i=>p(i.target.value),placeholder:"Amount",min:"1",max:"99",disabled:s||n==="running"}),o==="auto"&&e.jsx("input",{type:"number",className:"cashout-input",value:x,onChange:i=>f(i.target.value),placeholder:"Auto X",min:"1.01",step:"0.01",disabled:s||n==="running"}),s?e.jsx("button",{className:"cashout-button",onClick:()=>C(a),disabled:n!=="running"||u||!s,children:"Cash Out"}):e.jsx("button",{className:"bet-button",onClick:()=>j(a),disabled:n==="running"||u,children:"Bet"})]})]})),E=b.memo(({username:a,balance:o,gameState:r,onBetPlaced:l,onCashoutSuccess:p,regularMode:x,setRegularMode:f,regularAmount:s,setRegularAmount:j,regularAutoCashout:C,setRegularAutoCashout:n,regularHasBet:u,wagerMode:i,setWagerMode:y,wagerAmount:N,setWagerAmount:F,wagerAutoCashout:I,setWagerAutoCashout:R,wagerHasBet:A})=>{const[k,g]=b.useState(!1),v=b.useRef({regular:!1,wager:!1}),$=async t=>{var h,d;const c=t==="regular"?s:N;if(!c||parseFloat(c)<=0){l({message:"Please enter a valid bet amount"});return}if(parseFloat(c)>o){l({message:"Insufficient balance"});return}try{g(!0),await B.post("http://localhost:8000/place-bet",{player_name:a,bet_amount:parseFloat(c),bet_choice:t},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})}catch(m){l({message:((d=(h=m.response)==null?void 0:h.data)==null?void 0:d.message)||"Bet failed"})}finally{g(!1)}},_=async t=>{var h,d;if(!(!(t==="regular"?u:A)||v.current[t])){v.current[t]=!0;try{g(!0);const m=t==="regular"?"cash-out":"wager-cashout";await B.post(`http://localhost:8000/${m}`,{player_name:a,bet_type:t},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})}catch(m){p({message:((d=(h=m.response)==null?void 0:h.data)==null?void 0:d.detail)||"Cashout failed"})}finally{g(!1),setTimeout(()=>{v.current[t]=!1},500)}}};return e.jsxs("div",{className:"betting-containers",children:[e.jsx(w,{type:"regular",mode:x,setMode:f,amount:s,setAmount:j,autoCashout:C,setAutoCashout:n,hasBet:u,handleBet:$,handleCashout:_,gameState:r,loading:k}),e.jsx(w,{type:"wager",mode:i,setMode:y,amount:N,setAmount:F,autoCashout:I,setAutoCashout:R,hasBet:A,handleBet:$,handleCashout:_,gameState:r,loading:k})]})});export{E as default};
//# sourceMappingURL=Bet-9tYU-V7Z.js.map
