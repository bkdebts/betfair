{"version":3,"file":"Bet-9tYU-V7Z.js","sources":["../../src/components/Bet.jsx"],"sourcesContent":["import React, { useState, useRef, memo } from 'react';\nimport axios from 'axios';\nimport './Bet.css';\n\nconst BettingContainer = memo(({ type, mode, setMode, amount, setAmount, autoCashout, setAutoCashout, hasBet, handleBet, handleCashout, gameState, loading }) => {\n  return (\n    <div className={`betting-container ${type}-container`}>\n      <div className=\"betting-header\">\n        <h3>{type.charAt(0).toUpperCase() + type.slice(1)}</h3>\n        <div className=\"mode-toggle\">\n          <button\n            className={`toggle-btn ${mode === 'manual' ? 'active' : ''}`}\n            onClick={() => setMode('manual')}\n          >\n            M\n          </button>\n          <button\n            className={`toggle-btn ${mode === 'auto' ? 'active' : ''}`}\n            onClick={() => setMode('auto')}\n          >\n            A\n          </button>\n        </div>\n      </div>\n\n      <div className=\"betting-controls\">\n        <input\n          type=\"number\"\n          className=\"amount-input\"\n          value={amount}\n          onChange={(e) => setAmount(e.target.value)}\n          placeholder=\"Amount\"\n          min=\"1\"\n          max=\"99\"\n          disabled={hasBet || gameState === 'running'}\n        />\n        {mode === 'auto' && (\n          <input\n            type=\"number\"\n            className=\"cashout-input\"\n            value={autoCashout}\n            onChange={(e) => setAutoCashout(e.target.value)}\n            placeholder=\"Auto X\"\n            min=\"1.01\"\n            step=\"0.01\"\n            disabled={hasBet || gameState === 'running'}\n          />\n        )}\n        {!hasBet ? (\n          <button\n            className=\"bet-button\"\n            onClick={() => handleBet(type)}\n            disabled={gameState === 'running' || loading}\n          >\n            Bet\n          </button>\n        ) : (\n          <button\n            className=\"cashout-button\"\n            onClick={() => handleCashout(type)}\n            disabled={gameState !== 'running' || loading || !hasBet}\n          >\n            Cash Out\n          </button>\n        )}\n      </div>\n    </div>\n  );\n});\n\nconst Bet = memo(({\n  username, balance, gameState, onBetPlaced, onCashoutSuccess,\n  regularMode, setRegularMode, regularAmount, setRegularAmount, regularAutoCashout, setRegularAutoCashout, regularHasBet,\n  wagerMode, setWagerMode, wagerAmount, setWagerAmount, wagerAutoCashout, setWagerAutoCashout, wagerHasBet\n}) => {\n  const [loading, setLoading] = useState(false);\n  const cashoutDebounceRef = useRef({ regular: false, wager: false });\n\n  const handleBet = async (type) => {\n    const amount = type === 'regular' ? regularAmount : wagerAmount;\n    if (!amount || parseFloat(amount) <= 0) {\n      onBetPlaced({ message: 'Please enter a valid bet amount' });\n      return;\n    }\n    if (parseFloat(amount) > balance) {\n      onBetPlaced({ message: 'Insufficient balance' });\n      return;\n    }\n    try {\n      setLoading(true);\n      await axios.post('http://localhost:8000/place-bet', {\n        player_name: username,\n        bet_amount: parseFloat(amount),\n        bet_choice: type\n      }, {\n        headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\n      });\n      // WebSocket will handle the rest via 'bet_placed'\n    } catch (error) {\n      onBetPlaced({ message: error.response?.data?.message || 'Bet failed' });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCashout = async (type) => {\n    const hasBet = type === 'regular' ? regularHasBet : wagerHasBet;\n    if (!hasBet || cashoutDebounceRef.current[type]) return;\n\n    cashoutDebounceRef.current[type] = true;\n    try {\n      setLoading(true);\n      const endpoint = type === 'regular' ? 'cash-out' : 'wager-cashout';\n      await axios.post(`http://localhost:8000/${endpoint}`, {\n        player_name: username,\n        bet_type: type\n      }, {\n        headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\n      });\n      // WebSocket will handle the rest via 'cash_out'\n    } catch (error) {\n      onCashoutSuccess({ message: error.response?.data?.detail || 'Cashout failed' });\n    } finally {\n      setLoading(false);\n      setTimeout(() => { cashoutDebounceRef.current[type] = false; }, 500);\n    }\n  };\n\n  return (\n    <div className=\"betting-containers\">\n      <BettingContainer\n        type=\"regular\"\n        mode={regularMode}\n        setMode={setRegularMode}\n        amount={regularAmount}\n        setAmount={setRegularAmount}\n        autoCashout={regularAutoCashout}\n        setAutoCashout={setRegularAutoCashout}\n        hasBet={regularHasBet}\n        handleBet={handleBet}\n        handleCashout={handleCashout}\n        gameState={gameState}\n        loading={loading}\n      />\n      <BettingContainer\n        type=\"wager\"\n        mode={wagerMode}\n        setMode={setWagerMode}\n        amount={wagerAmount}\n        setAmount={setWagerAmount}\n        autoCashout={wagerAutoCashout}\n        setAutoCashout={setWagerAutoCashout}\n        hasBet={wagerHasBet}\n        handleBet={handleBet}\n        handleCashout={handleCashout}\n        gameState={gameState}\n        loading={loading}\n      />\n    </div>\n  );\n});\n\nexport default Bet;"],"names":["BettingContainer","memo","type","mode","setMode","amount","setAmount","autoCashout","setAutoCashout","hasBet","handleBet","handleCashout","gameState","loading","jsxs","jsx","e","Bet","username","balance","onBetPlaced","onCashoutSuccess","regularMode","setRegularMode","regularAmount","setRegularAmount","regularAutoCashout","setRegularAutoCashout","regularHasBet","wagerMode","setWagerMode","wagerAmount","setWagerAmount","wagerAutoCashout","setWagerAutoCashout","wagerHasBet","setLoading","useState","cashoutDebounceRef","useRef","axios","error","_b","_a","endpoint"],"mappings":"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"}